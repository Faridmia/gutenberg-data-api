(()=>{"use strict";const e=window.React,t=window.wp.components,n=window.wp.element,a=window.wp.data,r=window.wp.coreData,l=window.wp.htmlEntities;function s(){const[l,s]=(0,n.useState)(""),{pages:i,hasResolved:c}=(0,a.useSelect)((e=>{const t=l?{search:l}:{};return{pages:e(r.store).getEntityRecords("postType","page",t),hasResolved:e(r.store).hasFinishedResolution("getEntityRecords",["postType","page",t])}}),[l]);return(0,e.createElement)("div",null,(0,e.createElement)(t.SearchControl,{onChange:s,value:l}),(0,e.createElement)(o,{hasResolved:c,pages:i}))}function i({pageId:a}){const[r,l]=(0,n.useState)(!1),s=()=>{l(!1)};return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(t.Button,{onClick:()=>{l(!0)},variant:"primary"},"Edit"),r&&(0,e.createElement)(t.Modal,{onRequestClose:s,title:"Edit Page"},(0,e.createElement)(c,{pageId:a,onCancel:s,onSaveFinished:s})))}function o({hasResolved:n,pages:a}){return n?a?.length?(0,e.createElement)("table",{className:"wp-list-table widefat fixed striped table-view-list"},(0,e.createElement)("thead",null,(0,e.createElement)("tr",null,(0,e.createElement)("th",null,"Title"),(0,e.createElement)("th",null,"Actions"))),(0,e.createElement)("tbody",null,a.map((t=>(0,e.createElement)("tr",{key:t.id},(0,e.createElement)("td",null,(0,l.decodeEntities)(t.title.rendered)),(0,e.createElement)("td",null,(0,e.createElement)(i,{pageId:t.id}))))))):(0,e.createElement)("div",null,"No results"):(0,e.createElement)(t.Spinner,null)}function c({pageId:l,onCancel:s,onSaveFinished:i}){const{page:o,lastError:c,isSaving:d,hasEdits:p}=(0,a.useSelect)((e=>({page:e(r.store).getEntityRecord("postType","page",l),lastError:e(r.store).getLastEntitySaveError("postType","page",l),isSaving:e(r.store).isSavingEntityRecord("postType","page",l),hasEdits:e(r.store).hasEditsForEntityRecord("postType","page",l)})),[l]),{saveEditedEntityRecord:E,editEntityRecord:m}=(0,a.useDispatch)(r.store),[u,g]=(0,n.useState)(o?.title?.rendered||"");return(0,n.useEffect)((()=>{o&&g(o.title.rendered)}),[o]),o?(0,e.createElement)("div",{className:"my-gutenberg-form"},(0,e.createElement)(t.TextControl,{label:"Page title:",value:u,onChange:e=>{g(e),m("postType","page",l,{title:e})}}),c&&(0,e.createElement)("div",{className:"form-error"},"Error: ",c.message),(0,e.createElement)("div",{className:"form-buttons"},(0,e.createElement)(t.Button,{onClick:async()=>{await E("postType","page",l)&&i()},variant:"primary",disabled:!p||d},d?(0,e.createElement)(e.Fragment,null,(0,e.createElement)(t.Spinner,null),"Saving"):"Save"),(0,e.createElement)(t.Button,{onClick:s,variant:"tertiary",disabled:d},"Cancel"))):(0,e.createElement)(t.Spinner,null)}window.addEventListener("load",(function(){(0,n.render)((0,e.createElement)(s,null),document.querySelector("#my-first-gutenberg-app"))}),!1)})();